plugins {
    id 'java'
    id 'org.springframework.boot' version '3.4.4'
    id 'io.spring.dependency-management' version '1.1.7'
}

group = 'com.palangwi'
version = '0.0.1-SNAPSHOT'

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(21)
    }
}

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenCentral()
}

dependencies {
    // ğŸ”§ Spring Boot ê¸°ë³¸ ìŠ¤íƒ€í„°
    implementation 'org.springframework.boot:spring-boot-starter-web'             // ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ (MVC í¬í•¨)
    implementation 'org.springframework.boot:spring-boot-starter-validation'      // Bean Validation
    implementation 'org.springframework.boot:spring-boot-starter-security'        // Spring Security
    implementation 'org.springframework.boot:spring-boot-starter-oauth2-client'   // OAuth2 í´ë¼ì´ì–¸íŠ¸
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'        // JPA (Hibernate)
    implementation 'org.springframework.boot:spring-boot-starter-data-mongodb'    // MongoDB ì—°ë™
    implementation 'org.springframework.boot:spring-boot-starter-data-redis'      // Redis

    // ğŸ” JWT í† í° ì²˜ë¦¬
    implementation 'com.auth0:java-jwt:4.4.0'

    // ğŸ“¨ Java Mail-Sender
    implementation 'org.springframework.boot:spring-boot-starter-mail'

    // thymeLeaf
    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'
    implementation 'org.thymeleaf.extras:thymeleaf-extras-springsecurity6'

    // ğŸ§ª í…ŒìŠ¤íŠ¸ ê´€ë ¨
    testImplementation 'org.springframework.boot:spring-boot-starter-test'        // í†µí•© í…ŒìŠ¤íŠ¸
    testImplementation 'org.springframework.boot:spring-boot-testcontainers'      // Testcontainers ì—°ë™
    testImplementation 'org.springframework.batch:spring-batch-test'              // Spring Batch ì „ìš© í…ŒìŠ¤íŠ¸
    testImplementation 'org.springframework.security:spring-security-test'        // Security í…ŒìŠ¤íŠ¸
    testImplementation 'org.testcontainers:junit-jupiter'                         // JUnit5 ê¸°ë°˜ í…ŒìŠ¤íŠ¸ì»¨í…Œì´ë„ˆ
    testImplementation 'org.testcontainers:mongodb'                               // MongoDB í…ŒìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ
    testImplementation 'org.testcontainers:mysql'                                 // MySQL í…ŒìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ
    testRuntimeOnly 'org.junit.platform:junit-platform-launcher'                  // JUnit í”Œë«í¼ ëŸ°ì²˜

    // ğŸ§± DB ë“œë¼ì´ë²„
    runtimeOnly 'com.h2database:h2'                                               // ì¸ë©”ëª¨ë¦¬ DB (ê°œë°œ/í…ŒìŠ¤íŠ¸ìš©)
    runtimeOnly 'com.mysql:mysql-connector-j'                                     // MySQL JDBC ë“œë¼ì´ë²„

    // ğŸ›  ë¡¬ë³µ (ì»´íŒŒì¼ íƒ€ì„ ì „ìš©)
    compileOnly 'org.projectlombok:lombok'                                        // ë¡¬ë³µ - ì»´íŒŒì¼ íƒ€ì„ ì „ìš©
    annotationProcessor 'org.projectlombok:lombok'                                // ë¡¬ë³µ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œ

    // actuator
    implementation 'org.springframework.boot:spring-boot-starter-actuator'
}

tasks.named('test') {
    useJUnitPlatform()
}
